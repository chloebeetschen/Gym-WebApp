{% extends "base.html" %}
{% block content %}

<!--Basic Header-->
<h1>Calendar</h1>
<h2>If you would like to book one of our sessions that is open all day please choose from below.</h2>
<a href="/repeatEvents"><button type="button" class="btns">Lane Swimming</button>
<a href="/repeatEvents"><button type="button" class="btns">General Use Swimming</button>
<a href="/repeatEvents"><button type="button" class="btns">Swimming Lessons</button>
<a href="/repeatEvents"><button type="button" class="btns">Gym</button>
<a href="/repeatEvents"><button type="button" class="btns">Climbing</button>
<a href="/repeatEvents"><button type="button" class="btns">Squash</button>
<a href="/repeatEvents"><button type="button" class="btns">Sports Hall Session</button></a>


<!--Basic table to hold calendar information-->
<table class="table">
    <thead>
        <tr>
            <th>Week 1</th>
            <th>Week 2</th>
        </tr>
    </thead>
    <tbody>
        <!--W1-->
        <td>
            {% for j in range(0, 7) %}
                <table class="table">
                    <h3>{{weeks[j].strftime("%A")}} - {{weeks[j].strftime("%d/%m/%y")}}</h3>
                    <thead>
                        <th>Time</th>
                        <th>Activity Name</th>
                        <th>Spaces Left</th>
                        <th>Price</th>
                        <th></th>
                        <th></th>
                    <tbody>
                        {% for i in range (0 , (numEvents//2)) %}
                            {% if events[i].aDateTime.weekday() == daysInts[j] %} 
                                <tr>
                                    <!--display event and event info in the tables-->
                                    <td>{{events[daysInts[j]].aDateTime.strftime("%H:%M")}}</td>
                                    <td>{{eventInfo[daysInts[j]].activityType}}</td>
                                    {% if member == False %}
                                        <td>{{events[daysInts[j]].aPrice}}</td>
                                    {% endif %}
                                    <td>{{events[daysInts[j]].aCapacity-events[i].aSlotsTaken}}</td>
                                    <!--TODO Popup for event info-->
                                    <td><a href=""><button type="button" class="btns">Event Info</button></td>

                                    <!--If statement to see if acitivity is full and whether or not to dispay bookable button-->
                                    <td>
                                        {% if events[daysInts[j]].aSlotsTaken == events[daysInts[j]].aCapacity %}
                                            <a href=""></a><button type="button" class="btns">Full</button></a>
                                        {% else %}
                                            {% if member == False %}
                                                <a href="/makeBooking/{{events[i].id}}"><button type="button" class="btns">Book</button>
                                            {% else %}    
                                                <a href="/makeBooking/{{events[i].id}}"><button type="button" class="btns">Book</button>
                                            {% endif %}
                                        {% endif %}
                                    </td>
                                </tr>
                            {% endif %}
                        {% endfor %}
                    </tbody>
                </table>
            {% endfor %}
        </td>
        <!--W2-->
        <td>
            {% for j in range(0, 7) %}
                <table class="table">
                    <h3>{{weeks[j + 7].strftime("%A")}} - {{weeks[j + 7].strftime("%d/%m/%y")}}</h3>
                    <thead>
                        <th>Time</th>
                        <th>Activity Name</th>
                        <th>Spaces Left</th>
                        <th>Price</th>
                        <th></th>
                        <th></th>
                    <tbody>
                        {% for i in range (0 , (numEvents//2)) %}
                            {% if events[i].aDateTime.weekday() == daysInts[j] %} 
                                <tr>
                                    <!--display event and event info in the tables-->
                                    <td>{{events[daysInts[j]].aDateTime.strftime("%H:%M")}}</td>
                                    <td>{{eventInfo[daysInts[j]].activityType}}</td>
                                    {% if member == False %}
                                        <td>{{events[daysInts[j]].aPrice}}</td>
                                    {% endif %}
                                    <td>{{events[daysInts[j]].aCapacity-events[i].aSlotsTaken}}</td>
                                    <!--TODO Popup for event info-->
                                    <td><a href=""><button type="button" class="btns">Event Info</button></td>

                                    <!--If statement to see if acitivity is full and whether or not to dispay bookable button-->
                                    <td>
                                        {% if events[daysInts[j]].aSlotsTaken == events[daysInts[j]].aCapacity %}
                                            <a href=""></a><button type="button" class="btns">Full</button></a>
                                        {% else %}
                                            {% if member == False %}
                                                <a href="/makeBooking/{{events[i].id}}"><button type="button" class="btns">Book</button>
                                            {% else %}    
                                                <a href="/makeBooking/{{events[i].id}}"><button type="button" class="btns">Book</button>
                                            {% endif %}
                                        {% endif %}
                                    </td>
                                </tr>
                            {% endif %}
                        {% endfor %}
                    </tbody>
                </table>
            {% endfor %}
        </td>
    </tbody>
</table>


{% endblock %}